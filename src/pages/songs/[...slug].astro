---
import { getCollection, render } from 'astro:content';
import Base from '../../layouts/Base.astro';

export async function getStaticPaths() {
  const songs = await getCollection('songs');
  return songs.map(song => ({
    params: { slug: song.id },
    props: { song },
  }));
}

const { song } = Astro.props;
const { Content } = await render(song);
---

<Base title={`${song.data.title} — Bedtime Songs`}>
  <a href="/" class="back-link">← Back to all songs</a>
  
  <div class="song-header">
    <h1>{song.data.title}</h1>
    {song.data.artist && <div class="artist">{song.data.artist}</div>}
    {song.data.tags && song.data.tags.length > 0 && (
      <div class="tags">
        {song.data.tags.map(tag => (
          <span class="tag">{tag}</span>
        ))}
      </div>
    )}
  </div>
  
  <div class="lyrics">
    <Content />
  </div>
</Base>
